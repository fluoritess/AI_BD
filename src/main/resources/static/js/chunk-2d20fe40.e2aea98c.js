(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20fe40"],{b60f:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-card",{staticClass:"card_back",scopedSlots:e._u([{key:"header",fn:function(){return[t("el-button-group",[t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-plus-outline"},on:{click:function(a){return e.addNewFun("appForm")}}},[e._v("添加")]),t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",disabled:e.editDisabled},on:{click:e.updateFun}},[e._v("编辑")]),t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete",disabled:e.editDisabled},on:{click:e.deleteFun}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-circle-close-outline",disabled:e.editDisabled},on:{click:e.cancelFun}},[e._v("取消")])],1)]},proxy:!0}])},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-card",[t("el-form",{ref:"appForm",attrs:{model:e.addInfor,rules:e.rules}},[t("el-form-item",{attrs:{label:"应用系统",prop:"application"}},[t("el-select",{on:{change:e.TreeNodeDataReq},model:{value:e.addInfor.application,callback:function(a){e.$set(e.addInfor,"application",a)},expression:"addInfor.application"}},e._l(e.applications,function(e,a){return t("el-option",{key:a,attrs:{value:e.application_system_id,label:e.system_name}})}),1)],1)],1),t("el-tree",{attrs:{data:e.data,props:e.defaultProps,"node-key":"funTree","default-expand-all":!0,"highlight-current":!0},on:{"node-click":e.nodeClick,"node-collapse":e.nodeCollapse,"node-expand":e.nodeExpand}})],1)],1),t("el-col",{attrs:{span:11,push:1}},[t("el-card",[t("el-form",{ref:"funForm",attrs:{"label-position":"right","label-width":"100px",model:e.addInfor,rules:e.rules,disabled:e.formDisabled}},[t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{attrs:{disabled:!e.editDisabled},model:{value:e.addInfor.type,callback:function(a){e.$set(e.addInfor,"type",a)},expression:"addInfor.type"}},[t("el-option",{attrs:{label:"目录",value:"0"}}),t("el-option",{attrs:{label:"菜单",value:"1"}}),t("el-option",{attrs:{label:"功能",value:"2"}})],1)],1),t("el-form-item",{attrs:{label:"父级节点id"}},[t("el-input",{attrs:{disabled:"",placeholder:"空"},model:{value:e.addInfor.parentId,callback:function(a){e.$set(e.addInfor,"parentId",a)},expression:"addInfor.parentId"}})],1),t("el-form-item",{attrs:{label:"父级功能名称"}},[t("el-input",{attrs:{disabled:"",placeholder:"空"},model:{value:e.addInfor.parentName,callback:function(a){e.$set(e.addInfor,"parentName",a)},expression:"addInfor.parentName"}})],1),t("el-form-item",{attrs:{label:"功能名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入功能名称"},model:{value:e.addInfor.name,callback:function(a){e.$set(e.addInfor,"name",a)},expression:"addInfor.name"}})],1),1==e.addInfor.type?t("el-form-item",{attrs:{label:"路径",prop:"url"}},[t("el-input",{attrs:{placeholder:"请输入路径path"},model:{value:e.addInfor.url,callback:function(a){e.$set(e.addInfor,"url",a)},expression:"addInfor.url"}})],1):e._e(),t("el-form-item",{attrs:{label:"图标",prop:"icon"}},[t("el-input",{attrs:{placeholder:"请选择图标"},model:{value:e.addInfor.icon,callback:function(a){e.$set(e.addInfor,"icon",a)},expression:"addInfor.icon"}})],1),t("el-form-item",{attrs:{label:"排序号",prop:"order_num"}},[t("el-input",{attrs:{placeholder:"请输入排序号"},model:{value:e.addInfor.order_num,callback:function(a){e.$set(e.addInfor,"order_num",a)},expression:"addInfor.order_num"}})],1),0!=e.addInfor.type?t("el-form-item",{attrs:{label:"授权标识",prop:"perms"}},[t("el-input",{attrs:{placeholder:"请输入授权标识"},model:{value:e.addInfor.perms,callback:function(a){e.$set(e.addInfor,"perms",a)},expression:"addInfor.perms"}})],1):e._e(),t("el-form-item",{attrs:{label:"详情描述",prop:"detail"}},[t("el-input",{attrs:{placeholder:"请输入详情描述"},model:{value:e.addInfor.detail,callback:function(a){e.$set(e.addInfor,"detail",a)},expression:"addInfor.detail"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.formDisabled,expression:"!formDisabled"}]},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.dataSubmit("funForm")}}},[e._v("提交")]),t("el-button",{attrs:{type:"warning"},on:{click:function(a){return e.utils.formreset(e.$refs["funForm"])}}},[e._v("重置")])],1)],1)],1)],1)],1)],1)},n=[],l={data:function(){var e=this;return{formDisabled:!0,editDisabled:!0,addorup:1,data:[],defaultProps:{children:"children",label:"name"},applications:[],addInfor:{id:"",type:"0",parentId:"",parentName:"",name:"",url:"",icon:"",order_num:"",application:"",perms:"",detail:""},rules:{type:[{trigger:"blur",required:!0,message:"请选择类型"}],application:[{trigger:"blur",required:!0,message:"请选择应用系统"}],name:[{trigger:"blur",required:!0,message:"功能名称不能为空，请输入功能名称"},{trigger:"blur",len:20,title:"功能名称",validator:e.$validateApi.cnLength}],url:[{trigger:"blur",required:!0,message:"路径不能为空，请输入路径"},{trigger:"blur",pattern:/^[a-zA-Z0-9]{1,20}$/,message:"路径最长为20位,且只能包含为字母或数字"}],icon:[{trigger:"blur",required:!0,message:"图标不能为空，请选择图标"}],order_num:[{trigger:"blur",required:!0,message:"排序号不能为空，请输入排序号"}],perms:[{trigger:"blur",required:!0,message:"授权标识不能为空，请输入授权标识"}],detail:[{trigger:"blur",required:!0,message:"功能描述不能为空，请输入功能描述"}]}}},mounted:function(){this.applicationReq()},watch:{"addInfor.type":function(e){var a=this.addInfor.application;this.utils.formreset(this.$refs["funForm"]),this.addInfor.type=e,this.addInfor.application=a}},methods:{dataInjection:function(e){this.addInfor=this.utils.object.copy(e),this.$refs["funForm"].model=this.addInfor},formDisableToggle:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.formDisabled=e},editDisableToggle:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.editDisabled=e},addNewFun:function(e){var a=this,t=this;console.log(t.$refs[e].validateField(["application"],function(e,r){if(""==e){var n=a.addInfor.application;t.dataInjection({type:"0",application:n}),t.editDisableToggle(!0),t.formDisableToggle(!1),t.addorup=1}}))},updateFun:function(){this.formDisableToggle(!1),vm.addorup=0},cancelFun:function(){var e=this;e.editDisableToggle(!0),e.formDisableToggle(!0)},deleteFun:function(){var e=this,a={id:e.addInfor.id};e.$api.deleteRequset("/deleteFunctionData.action",e.utils.data.formatter(a))},applicationReq:function(){var e=this;e.$api.getData("/selectApplicationId.action").then(function(a){a.bool&&(e.applications=a.data)})},TreeNodeDataReq:function(){var e=this;e.$api.getData("/selectFunctionPaging.action").then(function(a){a.bool&&(e.data=a.data)})},nodeClick:function(e,a,t){var r=this;a.childNodes.length>0||(r.dataInjection(e),r.editDisableToggle(!1),r.formDisableToggle(!0))},nodeExpand:function(e,a,t){var r=this;r.dataInjection(e),r.editDisableToggle(!1)},nodeCollapse:function(e,a,t){},dataSubmit:function(){var e=this,a=e.addorup;e.$refs[ref].validate(function(t){t&&e.$api.opreateRequset(a?"/addFunction.action":"/updatePageInf.action",e.utils.data.formatter(e.addInfor),a?"添加":"修改").then(function(a){a&&(e.utils.formreset(e.$refs[ref]),e.editDisableToggle(!1),e.formDisableToggle(!0))})})}}},o=l,i=t("2877"),d=Object(i["a"])(o,r,n,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d20fe40.e2aea98c.js.map