webpackJsonp([27],{"+LWe":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("Xxa5"),n=e.n(o),r=e("exGp"),s=e.n(r),i=e("D7x1"),c={data:function(){return{inforadmin:!1,opreate:"add",tableSelectData:{selectTableurl:"agriculture/selectCropPlantInfo.action",pageloginData:{id:this.stateid},filterName:[]},greenhouseid:[],cropInfo:[],addData:{greenhouse_id:"",crop__id:"",remark:""}}},props:{stateid:String,statetitle:String},computed:{checkData:function(){return this.$store.getters.GETUSERTABLEPAGECHECKDATA}},components:{tables:i.a},mounted:function(){this.$store.commit("UPDATETABLESELECTDATA",this.tableSelectData)},methods:{getgreenhouse_id:function(){var t=this;t.$axios.post(t.HOST+"agriculture/selectDeployNodeInfo.action").then(function(a){a.bool&&(t.greenhouseid=a.data)}).catch(function(t){console.log(t)})},getcropInfo:function(){var t=this;t.$axios.post(t.HOST+"agriculture/selectCropInfo.action").then(function(a){a.bool&&(t.cropInfo=a.data)}).catch(function(t){console.log(t)})},stopPlant:function(){if(this.$api.opreate.TESTcheck("结束种植")){var t={id:this.checkData[0].crop_plant_id};this.$api.http.opreateHttp("",t,"添加")}},inforAddClick:function(t){var a,e=(a=s()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a in o.addData)o.addData[a]="";return t.abrupt("return",!0);case 2:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),o=this;this.opreate;t&&o.publicAddAndUpdate(),e().then(function(){o.opreate="add",o.inforadmin=t,o.$validator.errors.clear()})},publicAddAndUpdate:function(){this.getgreenhouse_id(),this.getcropInfo()},updateData:function(){this.$api.opreate.TESTcheck("修改")&&(this.inforadmin=!0,this.opreate="update",this.publicAddAndUpdate(),this.addData=this.$api.opreate.ObjectCopy(this.checkData[0]))},addDatas:function(){var t,a=(t=s()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"update"==e.opreate?a=e.$api.http.opreateHttp("agriculture/updateCropPlantInfo.action",r,"修改"):"add"==e.opreate&&(a=e.$api.http.opreateHttp("agriculture/addCropPlantInfo.action",r,"添加")),t.abrupt("return",a);case 2:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)}),e=this,o=e.stateid,r={data:e.addData,states:{id:o}};a().then(function(t){t&&e.inforAddClick(!1)})},deleteData:function(){var t=this;t.$validator.errors.clear();var a=t.$store.getters.GETUSERTABLEPAGECHECKDATA;t.$api.opreate.TESTcheck("删除")&&layer.confirm("是否删除",{btn:["确认","取消"]},function(){var e={id:a[0].crop_plant_id,states:{id:t.stateid}};t.$api.http.opreateHttp("agriculture/deleteCropPlantInfo.action",e,"删除")})},searchBtnClick:function(){""!=this.searchData.data||this.$layer.msg("请输入场景类型名后搜索",{icon:0})}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"panel panel-info"},[e("div",{staticClass:"panel-body"},[e("div",[t._v("种植信息管理")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.inforadmin,expression:"!inforadmin"}],staticClass:"buttonbox"},[t.$api.opreate.hasLoginComponents("sys:plainfo:add")?e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(a){t.inforAddClick(!0)}}},[t._v("新增")]):t._e(),t._v(" "),t.$api.opreate.hasLoginComponents("sys:plainfo:modify")?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.updateData}},[t._v("修改")]):t._e(),t._v(" "),t.$api.opreate.hasLoginComponents("sys:planinfo:delete")?e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteData}},[t._v("删除")]):t._e(),t._v(" "),t.$api.opreate.hasLoginComponents("sys:planinfo:stopPlant")?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.stopPlant}},[t._v("结束种植")]):t._e(),t._v(" "),t.$api.opreate.hasLoginComponents("sys:plainfo:search")?e("div",{staticClass:"pull-right col-sm-3 search-input"},[e("div",{staticClass:"col-sm-12"},[t._m(0),t._v(" "),e("input",{staticClass:"btn btn-info col-sm-3",attrs:{type:"button",value:"搜索"},on:{click:t.searchBtnClick}})])]):t._e()]),t._v(" "),e("tables",{directives:[{name:"show",rawName:"v-show",value:!t.inforadmin,expression:"!inforadmin"}],attrs:{tableSelectData:t.tableSelectData}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.inforadmin,expression:"inforadmin"}]},[e("form",{ref:"refForm",staticClass:"form form-horizontal col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-2"},[t._v("大棚编号")]),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.addData.greenhouse_id,expression:"addData.greenhouse_id"}],staticClass:"form-control",attrs:{type:"text",name:"greenhouse"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.addData,"greenhouse_id",a.target.multiple?e:e[0])}}},t._l(t.greenhouseid,function(a,o){return e("option",{key:o,domProps:{value:a.deployNodeId,textContent:t._s(a.deployNodeId)}})}))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-2"},[t._v("作物名称")]),t._v(" "),e("div",{staticClass:"col-sm-6"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.addData.crop_id,expression:"addData.crop_id"}],staticClass:"form-control",attrs:{type:"text",name:"cropInfo"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.addData,"crop_id",a.target.multiple?e:e[0])}}},t._l(t.cropInfo,function(a,o){return e("option",{key:o,domProps:{value:a.cropId,textContent:t._s(a.cropName)}})}))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label col-sm-2"},[t._v("备注")]),t._v(" "),e("div",{staticClass:"col-sm-6",class:{"has-success":!t.errors.has("remark")&&""!=t.addData.remark,"has-error":t.errors.has("remark")}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addData.remark,expression:"addData.remark"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{rows:"6",name:"remark",placeholder:"请输入备注","data-vv-as":"备注"},domProps:{value:t.addData.remark},on:{input:function(a){a.target.composing||t.$set(t.addData,"remark",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"text-danger"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("remark"),expression:"errors.has('remark')"}]},[t._v(t._s(t.errors.first("remark")))])])]),t._v(" "),e("div",{staticClass:"form-group col-sm-12"},[e("button",{staticClass:" col-sm-2 col-sm-offset-2 btn btn-info",attrs:{type:"button"},on:{click:t.addDatas}},[t._v("提交")]),t._v(" "),e("button",{staticClass:" col-sm-2 col-sm-offset-2  btn btn-warning",attrs:{type:"button"},on:{click:function(a){t.inforAddClick(!1)}}},[t._v("返回")])])])])],1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-sm-8 search-input "},[a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"搜索用户"}})])}]};var d=e("VU/8")(c,l,!1,function(t){e("5tmQ")},null,null);a.default=d.exports},"5tmQ":function(t,a){}});
//# sourceMappingURL=27.be479f455c28348f2502.js.map