webpackJsonp([18],{"8JpL":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{sensorInfVisible:!0,NowAndHistory:!0,typenum:0,items:[{id:1,name:1}],sensorInf:{max:35,min:26,now:24,type:"温度|气压"},typeCheckData:[],initData:[{url:"sceneFarm",title:"农场"},{url:"greenHouse",title:"大棚"},{url:"equip",title:"设备"},{url:"sensor",title:"传感器"}]}},mounted:function(){this.drawChartNow()},methods:{loginSensorInfData:function(t){var e=this,n=this;n.sensorInfVisible=!0,n.$axios.post(n.HOST+"",{id:t}).then(function(t){n.sensorInfVisible=!0,e.drawChartNow()}).catch(function(t){})},loginItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this,i=n.typenum;if(i==n.initData.length-1)if(t>0)n.loginSensorInfData();else if(t<0&&n.sensorInfVisible)return n.sensorInfVisible=!1,void(n.NowAndHistory=!0);""!=e&&(n.typeCheckData[n.typenum]=e),t>0?n.typenum+=1:t<0&&(n.typenum-=1),(i=n.typenum)<=n.initData.length-1?n.loginThisItems(n.initData[i].url,""!=e?e.id:0==n.typenum?"":n.typeCheckData[i].id):(n.typenum=n.initData.length-1,i=n.typenum)},loginThisItems:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this;n.$axios.post(n.HOST+t,""!=e?{id:e}:"").then(function(t){n.items=t.data}).catch(function(t){})},drawChartNow:function(){var t=this,e=t.$echarts.init(document.getElementById("myChartNow"));t.$axios.post(t.HOST+"").then(function(t){}).catch(function(t){});var n=10,i=t.sensorInf.min,s=t.sensorInf.max,a=s-i;a>10||a<6?a>10&&a<20&&(n=10):a<=10&&a>=6&&(n=a+4);var o={tooltip:{formatter:"{a} <br/>{b} : {c} ℃"},toolbox:{feature:{restore:{},saveAsImage:{}}},splitNumber:n,series:[{min:i-a/(n-4)*2,max:s+a/(n-4)*2,splitNumber:n,name:"温度",type:"gauge",detail:{formatter:"{value} ℃"},axisLine:{show:!0,lineStyle:{color:[[2/n,"#ec2a08"],[(n-2)/n," #21f32c"],[1,"#ec2a08"]]}},data:[{value:(s-i)/2+i,name:"温度"}],markPoint:{clickable:!1,symbol:"circle",symbolSize:5,data:[{x:"center",y:"center",itemStyle:{color:"#FFF"}}]},axisLabel:{show:!0,formatter:function(t){return t.toFixed(1)},textStyle:{color:"auto"}},axisTick:{splitNumber:20}}]};console.log(),setInterval(function(){e.setOption(o,!0)},2e3)},drawChartHistory:function(){var t=this.$echarts.init(document.getElementById("myChartHistory"));this.$axios.post(this.HOST+"").then(function(t){}).catch(function(t){});t.setOption({xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}},!0)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"panel panel-info"},[n("div",{staticClass:"panel-body"},[n("div",[t._v("实时监测")]),t._v(" "),n("div",[n("div",{staticClass:"panel panel-default"},[n("div",{staticClass:"panel-heading"},[n("div",[n("h4",[t._l(t.typeCheckData,function(e,i){return n("span",{directives:[{name:"show",rawName:"v-show",value:i<t.typenum,expression:"index<typenum"}],key:i,domProps:{innerHTML:t._s(e.name+"&nbsp;&nbsp;>&nbsp;&nbsp;")}})}),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.initData[t.typenum].title)}}),t._v(" "),0!=t.typenum?n("a",{staticClass:"btn btn-link pull-right",on:{click:function(e){t.loginItems(-1)}}},[t._v("返回上一级")]):t._e()],2)])]),t._v(" "),n("div",{staticClass:"panel-body"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.sensorInfVisible,expression:"!sensorInfVisible"}]},[t.items.length>0?n("div",t._l(t.items,function(e,i){return n("div",{key:i,staticClass:"col-sm-2 col-md-1 col-lg-1"},[n("button",{staticClass:"btn btn-default",domProps:{innerHTML:t._s(e.name)},on:{click:function(n){t.loginItems(1,e)}}})])})):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.items.length<=0,expression:"items.length<=0"}],staticClass:"col-sm-12 txt-center cursor-pointer logindata-error"},[t._v("\r\n                                未查找到数据，点击请重试\r\n                            ")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.sensorInfVisible,expression:"sensorInfVisible"}]},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.NowAndHistory,expression:"NowAndHistory"}]},[n("div",[n("a",{staticClass:"btn btn-link pull-right",on:{click:function(e){t.NowAndHistory=!1}}},[t._v("查看历史记录")])]),t._v(" "),n("div",{style:{width:"600px",height:"500px",margin:"auto"},attrs:{id:"myChartNow"}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.NowAndHistory,expression:"!NowAndHistory"}]},[n("div",[n("a",{staticClass:"btn btn-link pull-right",on:{click:function(e){t.NowAndHistory=!0}}},[t._v("查看当前数据")])]),t._v(" "),n("div",{style:{width:"600px",height:"500px",margin:"auto"},attrs:{id:"myChartHistory"}})])])])])])])])])},staticRenderFns:[]};var a=n("VU/8")(i,s,!1,function(t){n("wPy2")},"data-v-1bb7baa4",null);e.default=a.exports},wPy2:function(t,e){}});
//# sourceMappingURL=18.d76eaa57bb2acf86f815.js.map